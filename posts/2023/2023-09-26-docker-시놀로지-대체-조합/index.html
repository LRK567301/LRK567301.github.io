<!DOCTYPE html>
<html lang="ko-kr"><head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
   <meta name="description" content="블루스크린은 해결했지만 아직 거슬리는 재부팅, SMB 무작위 연결 불가, SMB 안드로이드에서만 연결 불가, damselfly 같은 거대 사진 라이브러리 스캔이 돌지 않아도 WSL 도커 단체자살, shm_size를 지정해도 폭발, 제한을 걸지 않으면 한없이 폭주하는 기본 WSL 도커의 점유율까지 도커가 있으면 윈도우 데탑 한대로 다 해결될거란 예상보다 현실은 훨씬 다채롭다.
그래도 시놀의 편의성을 위해 중첩되어야 했던 레이어들을 싹 걷어내니 좋은 것도 있어.  일단 파일 시스템과 파티션. ext4도 그랬지만 DSM을 하드마다 올리기 위해 소모됐던 2.35GB 2GB 127MB 100MB의 공간이 싹 내 것이 됐다. @eaDir도 없고 filebrowser에 루트를 그대로 마운트해도 온갖 리눅스 디렉터리가 그대로 드러나 정신사나울 일도 없어. 시놀로지 패키지 의존성 때문에 구버전 php를 유지할 필요도 없고, 도커 쓸 때마다 따져야 했던 1026 100 유저 권한도 필요없다. 기본값 1000 1000 안 건드려도 돼. 그리고 네트워크 지연이 없으니 윈도우 사진 앱으로 최근 사진들을 빠르게 읽어와 볼 수 있기까지.">  

  <title>
    
      [Docker] 시놀로지 대체 조합
    
  </title>


  <link rel="shortcut icon" type="image/x-icon" href="/" />
  
  
  
  <link rel="stylesheet" href="/css/main.de67f9cd0aacf98648d0c0d4796ad0cd856635e2a60036ee14189fcbcc2b1a4c7d6d5e94e7d859565e0f840a9674885e8e841a2c0a8e5dd44c055b640ebaaf1c.css" integrity="sha512-3mf5zQqs&#43;YZI0MDUeWrQzYVmNeKmADbuFBify8wrGkx9bV6U59hZVl4PhAqWdIhejoQaLAqOXdRMBVtkDrqvHA==" />
  
</head>
<body a="auto">
        <main class="page-content" aria-label="Content">
            <div class="w">
                <div class="post-meta">
                    <a href="/">..</a>

                    <p>
                        <time datetime="2023-09-26 19:05:00 &#43;0900 KST">
                            2023-09-26
                        </time>
                    </p>
                </div>

<article>
    <h1>[Docker] 시놀로지 대체 조합</h1>

    

    <p>블루스크린은 해결했지만 아직 거슬리는 재부팅, SMB 무작위 연결 불가, SMB 안드로이드에서만 연결 불가, damselfly 같은 거대 사진 라이브러리 스캔이 돌지 않아도 WSL 도커 단체자살, shm_size를 지정해도 폭발, 제한을 걸지 않으면 한없이 폭주하는 기본 WSL 도커의 점유율까지 도커가 있으면 윈도우 데탑 한대로 다 해결될거란 예상보다 현실은 훨씬 다채롭다.</p>
<p>그래도 시놀의 편의성을 위해 중첩되어야 했던 레이어들을 싹 걷어내니 좋은 것도 있어.  일단 파일 시스템과 파티션. ext4도 그랬지만 DSM을 하드마다 올리기 위해 소모됐던 2.35GB 2GB 127MB 100MB의 공간이 싹 내 것이 됐다. @eaDir도 없고 filebrowser에 루트를 그대로 마운트해도 온갖 리눅스 디렉터리가 그대로 드러나 정신사나울 일도 없어. 시놀로지 패키지 의존성 때문에 구버전 php를 유지할 필요도 없고, 도커 쓸 때마다 따져야 했던 1026 100 유저 권한도 필요없다. 기본값 1000 1000 안 건드려도 돼. 그리고 네트워크 지연이 없으니 윈도우 사진 앱으로 최근 사진들을 빠르게 읽어와 볼 수 있기까지.</p>
<h2 id="dsm">DSM</h2>
<p>대시보드는 Heimdall➡️homarr➡️flame➡️dashy➡️Heimdall. 돌고 돌아서 다시 헤임달. organizr, fenrus까지는 안 써봤다. 헤임달의 아이콘이 너무 큼직한 것 같아서 조금 더 편집이 되는 걸로 갈아탄 거였는데 homarr는 원노트 운동장마냥 아무데나 배치는 되는데 그게 또 자유롭게 수정되진 않아서 빡쳤고 flame은 심플하지만 아이콘 수동 지정도 귀찮고 너무 밋밋해서 한 눈에 안 들어왔으며  dashy는 homarr 느낌이면서 밀도있게 세팅하기 쉬웠고 텍스트 설정값이 남아서 이전하기도 좋다고 생각했는데 죽어도 로그인 설정이 안 되더라. 결국 쉽고 간단하고 빠른 헤임달.</p>
<p>역방향 프록시랑 도메인 관리는 Nginx Proxy Manager. 시놀로지가 자기네 ddns 말고 다른 도메인에 대한 let&rsquo;s encrypt 와일드카드 인증은 아직도 지원하지 않았기에 이건 훨씬 편해졌다.</p>
<p>도커 관리는 portainer를 깔아야하나 했는데 일단 도커 데스크탑으로 충분해서 방치. 도커 상태 포함해 윈도우에서 보는게 제일 빠르고 확실하니까.</p>
<h2 id="탐색기">탐색기</h2>
<p>1안 filestash, 2안 filebrowser. <a href="https://al.nn.ci/">Alist</a>라고 filestash 비슷한게 있는데 파일 많은 폴더에서 성능이 비교할 수 없이 떨어지더라.</p>
<p>그런데 확장성과 성능(특히 사진파일이 엄청나게 많을 때)에 반해 filestash를 데탑과 모바일을 오가며 직접 써보니 아&hellip;..불편하네 이거&hellip;.모바일에서 파일 이동이 매우 어렵다. 마우스로 하나씩 클릭해서 드래그하긴 그럭저럭 할만한데 모바일에선 답이 없어. 롱터치한다고 메뉴가 뜨는 것도 아니고 체크박스 체크해봤자 다운로드/제거 뿐. 데탑에서도 썩 편하진 못한게 기본 뷰로는 파일명 안 보여서 자세히로 전환하고 마우스 커서를 갖다대니까 항목 한 줄이 번쩍번쩍하면서 자꾸 크기가 바뀐다. 불편해. 썸네일이랑 이미지 뷰만 빠르지 뷰어 상태에선 파일 삭제도 못 하고 삭제할 때도 매번 묻는 확인단어 입력창. 안전하지만 귀찮아.</p>
<p>filebrowser는 아주 편안하다. 기본값이 1클릭=1터치=선택인게 아주 고려가 잘 되어 있어. 여러 파일 선택이나 이동 팝업도 편리하고 이미지 뷰어 상태에서 삭제도 쉽다. txt는 물론 md 파일 편집도 바로 가능해서 간단한 메모도 대체 가능.</p>
<h2 id="메모">메모</h2>
<p>넥스트클라우드 메모가 될 뻔 했는데 내가 외부에서 얼마나 접근하는지를 고려하니 filebrowser로 충분했다. 마크다운 블로그까지 통합해 조플린을 다시 써볼까 했는데 폰에서 며칠을 동기화해도 노트북을 못 나누고 있고 하나의 거대한 폴더에 저장되어버리는 첨부파일이 역시 거슬리더라. 파일명을 싹 고유ID로 디비화시키는 건 원노트나 에버노트 생각하면 납득되는데 10년 이상 쌓아온 게 커서 문제야. 마크다운이라 탈출 깔끔하게 되면 뭐해 텍스트 md만 그렇지 첨부파일은 리소스 폴더 하나에 때려박아서 내보내주는걸. 딱 나랑 <a href="https://discourse.joplinapp.org/t/why-im-leaving-joplin-for-now/17003">같은 고민</a>으로 에버노트-조플린-옵시디언을 방황하는 사람이 있더라.</p>
<p><a href="https://joplin-utils.rxliuli.com/joplin-vscode-plugin/">조플린-vs code 플러그인</a>도 있지만 디비 구조가 다르니 근본적 해결이 안 되고 믿을 건 깡텍스트인 넥스트클라우드인데 웹/안드로이드(메모)/윈도우(QOwnNotes)까지 선택지는 넓지만 실제 사용경험이 좀 애매하다. 특히 모바일 앱.  심심하면 동기화 실패, 짜증나서 넥클 앱으로 md 생성해서 복붙했더니 맨 윗줄만 남질 않나 파일 생성하거나 열 때 생각보다 로딩도 꽤 있다. 메모앱 뷰를 플레인 에디트 모드로 했더니 또 바로 열리는게 리치에디터 불러오느라 그러는 것 같기도 한데 믿었던 개별 앱이 한번 경험을 조져버리니 더 손이 안 가.</p>
<p>코드서버는 상당히 그럴싸하지만 실제 활용성은 그저 그렇다. 웹에서 이만한 툴이 돌아가는건 대단한데 웹은 결국 웹. 빨리 글 쓸 때는 결국 로컬 vs code가 편하고 외부에서 블로그 검색을 한다 해도 폰에서 보는게 상당히 불편해서 또 잘 안 봐. 폴더싱크나 syncthing으로 md파일들을 폰에 동기화시키는게 낫다.</p>
<p>trilium은 오즈비안 그대로 웹에 올린 것처럼 가볍고 깔끔한데 마크다운 내보내기하면 쓸데없는 기호(슬래시)를 문장 앞과 url 사이사이에 왕창 붙인다. 제목도 맨 앞줄에 붙이고 !!!meta.json라는 쓸데없는 파일까지 첨부해. 혹시나 해서 html이나 opml 내보내기도 해봤지만 opml은 플레인텍스트도 아니고 조플린처럼 깔끔한 마크다운 텍스트를 내보내기해주는게 아니면 마크다운의 의미가 사라진다.</p>
<h2 id="클라우드--오피스">클라우드 / 오피스</h2>
<p>꽤 안정적이었던 파일런은 유료화로 떠나갔고, 넥스트클라우드도 wsl 도커에서 올리려니 자꾸 초기 세팅을 못 넘어가고 죽는다. aio은 돼놓고 왜? 게다가 메모와 마찬가지로 회사에서 막힌 서비스(오피스/메모) 우회 용도 뿐이지 그외엔 쓸 일이 없는게 개인 클라우드고 시놀로지 드라이브였어. 그럼 데탑의 압도적 성능빨로 웹브라우저 VNC 이미지 통해서 구글이나 오피스365 접근해버리는게 낫겠는데? 그래서 정말 올려보니 이야&hellip;&hellip;깡성능이 최고구나 웹브라우저 in 웹브라우저가 이렇게 빨라. neko 같은 이미지 쓰면 소리까지 들을만 하고. 거기까진 과해서 jlesage/firefox로 돌아왔지만.</p>
<h2 id="음악">음악</h2>
<p>가볍게는 Navidrome, 한방은 젤리핀. Navidrome가 훨씬 가볍지만 % 꼭 붙여야 하는 검색이나 모바일 앱이 아쉬운데 그걸 젤리핀이 해결해준다. 문제는 느려. 좀 빠를 때도 있지만 대체적으로 한발짝 느린데다 검색이 좀 편리할 뿐 앨범 분류는 음악 전문이 아님을 여실히 드러낸다. 디스크 분류 못하고 앨범을 나누는 건 그렇다 치고 Cover 폴더에 담긴 다른 아티스트/앨범아티스트/앨범명 곡들을 진짜 그냥 Cover 앨범 하나로 만들어둔걸 보고 하&hellip;&hellip;태그인식 이전에 폴더인식이야? 찾아보니 예전엔 22/7 검색도 못했더라. 슬래시 들어갔다고 22랑 7을 나누고 있었는데 그건 멀쩡해졌네. 여튼 덕분에 Cover 폴더 안의 곡은 아티스트별로 분류할 수 조차 없어서 다시 Navidrome.</p>
<h2 id="영상">영상</h2>
<p>당연히 젤리핀인데 아직 올리진 않았다. 외부에서도 받아서 봤지 스트리밍할 일이 없네.</p>
<h2 id="사진">사진</h2>
<p>답이 없다. 사진만큼은 시놀로지 포토 스테이션, 모멘츠, 포토가 압도적이었다. 구글 포토에 돈 내고 다 때려박을 게 아니면 아니 구글 포토에 때려박는거랑은 또 다르다. 원본 폴더를 유지하면서 전체 타임라인 라이브러리로 깔끔하고 확실하고 완벽하게 보는 건 시놀로지가 유일무이하다. 그나마 깡성능이 대단한 damselfly가 유일하게 전체 스캔을 해낼 뿐 얘도 시놀/WSL/성능 가리지 않고 도커를 자주 터뜨리고, 포토프리즘도 그나마 구실 하는 척이지 그 미만은 잡이다. 넥클 메모리? 넥클 자체가 안올라가는데 어쩔거임.</p>
<p>이 &lsquo;모바일에서만 업로드만 이미지 라이브러리&rsquo;를 과연 얼마나 보는가를 따져보면 사실 또 흐으으음이긴 하고 그래서 큰 맘 먹고 탈출한건데 옛날 사진이나 픽시브 최근 짤 배경화면마려워서 찾으려니 시놀로지가 너무 그리워진다. damselfly가 대단하긴 한데, 온디멘드 썸네일까지 켜면 WSL 도커도 잘 버티긴 하는데 포토프리즘을 몇번 다시 써볼만큼 모바일 뷰가 불편해서.</p>
<h2 id="블로그">블로그</h2>
<p>휴고용 스니펫이라거나 Path Intellisense 같은 툴들을 이용한 <a href="https://www.ernestchiang.com/en/posts/2021/my-hugo-workflow/">워크플로우</a>도 있지만 이미지는 어차피 서브도메인으로 빼놔서 큰 효용이 없을 것 같다. 블로그용 웹서버 따로 돌리는게 귀찮아서 사진 전부 static에 집어넣고 휴고 서버를 포트포워딩해보다가 사진 라이브러리랑 비슷한 흐름으로 도커 터지는 걸 보고 엔진엑스 두개 굴리는 걸로 선회했고.</p>
<p>그런데 시놀에서 서버 굴릴 때와 달리 오래 서버 컨테이너를 오래 켜두면 수정된 파일을 인식하질 않는다. 컨테이너 시작한지 얼마 안됐을 때는 네이티브 리눅스에서처럼 바로바로 반응하는데 으으으음&hellip;&hellip;그때그때 빌드가 맞나? WSL은 개발용인가? 역시 VM? 이런 데서 신경을 쓰게 될 줄이야.</p>
<h2 id="다운로드">다운로드</h2>
<p>트랜스미션+gluetun+flexget(&amp;gluetun 프록시)이었는데 qbittorrent+gluetun으로 RSS까지 한방에. RSS 초기 등록이 쪼끔 귀찮고 트랜스미션과 달리 클라이언트 선택폭도 좁고 크롬 확장과 달리 마그넷 클릭할 때마다 클라이언트 창이 맨 위로 올라와서 불편하지만 검열 때문에 flexget에 프록시까지 붙여주고 꼬일 때마다 대응하는 것보단 한 컨테이너가 쉽다. 웹 GUI에서 RSS 내용도 바로 볼 수 있고.</p>
<p>그리고 웹 다운로드는 jdownloader 고려했는데 윈도우 rdp랑 웹 in 웹브라우저를 두고 일부러 찾을 필요는 없었어.</p>
<hr>
<p>모든 데이터가 내 관리하에 놓이는 깔끔함은 크다. 그런데 WSL 도커가 윈도우 탓인지 도커 탓인지 네이티브랑 달리 불안정해. 도커랑 SMB랑 번갈아가며 애를 먹이는데 쉽지 않다. 깔끔하고 편하긴 해. 깔끔하고 편하긴 한데 제아무리 도커라도 결국 자작 나스, 끝없는 길에 와버렸으니 시행착오도 끝이 없겠다.</p>

</article>

            </div>
        </main>
    </body></html>
