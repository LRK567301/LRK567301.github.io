<!DOCTYPE html>
<html lang="ko-kr"><head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
   <meta name="description" content="https://learn.microsoft.com/en-us/windows/wsl/networking
https://github.com/microsoft/WSL/issues/11102
도커 업데이트하다 오랜만에 실험정신이 끊어올라서 도전. 가상 스위치까지 만들어서 외부IP 주는 거 말고 미러 모드로 해결되지 않을까? 설명에서는 여튼 뭐든 다 좋다는데?
.wslconfig
[wsl2]
networkingMode=mirrored

[experimental]
hostAddressLoopback=true
networkingMode=mirrored만 켜서는 호스트에서 localhost:포트, 127.0.0.1:포트로 접속 가능, 192.x.x.x:포트는 접속 불가, 공유기 내 다른 기기에서는 192.x.x.x:포트 접속 가능.
hostAddressLoopback=true까지 켜니까(실험적 기능이니까 [experimental] 잊지 말고) 호스트에서 localhost:포트, 127.0.0.1:포트, 192.x.x.x:포트까지 다 접속 가능했어. 문제는 npm 역방향 프록시. localhost, 127.0.0.1, 192.x.x.x 셋 다 번갈아가며 주고 wsl &ndash;shutdown하고 재실행만으론 완벽하지 않은 것 같아서 윈도우 재부팅까지 별 지랄을 했는데 새로고침 죽어라 하다 보면 붙을 라우팅같은게 잠깐 꼬였는지 한번쯤 페이지 뜨는 정도.">  

  <title>
    
      [WSL] networkingMode, hostAddressLoopback
    
  </title>


  <link rel="shortcut icon" type="image/x-icon" href="/" />
  
  
  
  <link rel="stylesheet" href="/css/main.51652302d3a998bf7887aed5c2cf89141bbebdf45a2c8f87b0717a3cf4f51c4e53c694c328fb1de78c3a625a1c01f80745bf1f2f42c040647a245cbbb6c2d1d7.css" integrity="sha512-UWUjAtOpmL94h67Vws&#43;JFBu&#43;vfRaLI&#43;HsHF6PPT1HE5TxpTDKPsd54w6YlocAfgHRb8fL0LAQGR6JFy7tsLR1w==" />
  
</head>
<body a="auto">
        <main class="page-content" aria-label="Content">
            <div class="w">
                <div class="post-meta">
                    <a href="/">..</a>

                    <p>
                        <time datetime="2024-11-02 15:58:00 &#43;0900 KST">
                            2024-11-02
                        </time>
                    </p>
                </div>

<article>
    <h1>[WSL] networkingMode, hostAddressLoopback</h1>

    

    <p><a href="https://learn.microsoft.com/en-us/windows/wsl/networking">https://learn.microsoft.com/en-us/windows/wsl/networking</a></p>
<p><a href="https://github.com/microsoft/WSL/issues/11102">https://github.com/microsoft/WSL/issues/11102</a></p>
<p>도커 업데이트하다 오랜만에 실험정신이 끊어올라서 도전. 가상 스위치까지 만들어서 외부IP 주는 거 말고 미러 모드로 해결되지 않을까? 설명에서는 여튼 뭐든 다 좋다는데?</p>
<pre tabindex="0"><code>.wslconfig
[wsl2]
networkingMode=mirrored

[experimental]
hostAddressLoopback=true
</code></pre><p>networkingMode=mirrored만 켜서는 호스트에서 localhost:포트, 127.0.0.1:포트로 접속 가능, 192.x.x.x:포트는 접속 불가, 공유기 내 다른 기기에서는 192.x.x.x:포트 접속 가능.</p>
<p>hostAddressLoopback=true까지 켜니까(실험적 기능이니까 [experimental] 잊지 말고) 호스트에서 localhost:포트, 127.0.0.1:포트, 192.x.x.x:포트까지 다 접속 가능했어. 문제는 npm 역방향 프록시. localhost, 127.0.0.1, 192.x.x.x 셋 다 번갈아가며 주고 wsl &ndash;shutdown하고 재실행만으론 완벽하지 않은 것 같아서 윈도우 재부팅까지 별 지랄을 했는데 새로고침 죽어라 하다 보면 붙을 라우팅같은게 잠깐 꼬였는지 한번쯤 페이지 뜨는 정도.</p>
<pre tabindex="0"><code>.wslconfig
networkingMode=bridged
vmSwitch=&#34;하이퍼V에서 생성한 가상 스위치명&#34;
</code></pre><p>다 지우고 기존 가상스위치 외부IP 부여로 돌아오니까 모든 것의 정상화.</p>

</article>

            </div>
        </main>
    </body></html>
